<header>
  <div class="header-container">
    <a href="#" class="logo-link" id="logo-link">
      <img
        src="images/racingLogo.png"
        alt="Racing de Santander Crest"
        class="logo"
        id="logo-image"
      />
    </a>

    <nav class="main-nav">
      <ul>
        <li><a href="#" id="nav-home">HOME</a></li>
        <li><a href="#" id="nav-squad">SQUAD</a></li>
        <li><a href="#" id="nav-history">HISTORY</a></li>
      </ul>
    </nav>

    <a
      href="https://entradas.realracingclub.es/"
      target="_blank"
      rel="noopener noreferrer"
      class="cta-button"
      >BUY TICKETS</a
    >
    <button class="hamburger-menu" aria-label="Open navigation menu">
      <span></span><span></span><span></span>
    </button>
  </div>
</header>

<script>
  // Set correct paths based on current page location
  function setNavigationPaths() {
    const currentPath = window.location.pathname;
    const pathSegments = currentPath
      .split("/")
      .filter((segment) => segment !== "");

    // Check if we're in a subdirectory (like /pages/ or /repo-name/pages/)
    const isInSubdirectory = pathSegments.length > 1;
    const isInPagesFolder = currentPath.includes("/pages/");

    // Determine base paths for GitHub Pages
    let homePath, squadPath, historyPath, imagePath;

    if (isInPagesFolder) {
      // We're in /pages/ subdirectory
      homePath = "../index.html";
      squadPath = "./squad.html";
      historyPath = "./history.html";
      imagePath = "../images/racingLogo.png";
    } else if (isInSubdirectory) {
      // We're in a GitHub Pages subdirectory (like /repo-name/)
      homePath = "./index.html";
      squadPath = "./pages/squad.html";
      historyPath = "./pages/history.html";
      imagePath = "./images/racingLogo.png";
    } else {
      // We're at the root
      homePath = "./index.html";
      squadPath = "./pages/squad.html";
      historyPath = "./pages/history.html";
      imagePath = "./images/racingLogo.png";
    }

    // Update logo link and image
    const logoLink = document.getElementById("logo-link");
    const logoImage = document.getElementById("logo-image");
    if (logoLink) logoLink.href = homePath;
    if (logoImage) logoImage.src = imagePath;

    // Update navigation links
    const homeLink = document.getElementById("nav-home");
    const squadLink = document.getElementById("nav-squad");
    const historyLink = document.getElementById("nav-history");

    if (homeLink) homeLink.href = homePath;
    if (squadLink) squadLink.href = squadPath;
    if (historyLink) historyLink.href = historyPath;
  }

  // Header functionality
  document.addEventListener("DOMContentLoaded", function () {
    // Set navigation paths first
    setNavigationPaths();

    // Set active navigation based on current page
    const currentPage =
      window.location.pathname.split("/").pop() || "index.html";
    const pageNavMap = {
      "index.html": "nav-home",
      "squad.html": "nav-squad",
      "history.html": "nav-history",
    };

    const activeNavId = pageNavMap[currentPage];
    if (activeNavId) {
      const activeNav = document.getElementById(activeNavId);
      if (activeNav) {
        activeNav.classList.add("active");
      }
    }

    // Mobile menu functionality
    const hamburgerMenu = document.querySelector(".hamburger-menu");
    const mainNav = document.querySelector(".main-nav");

    hamburgerMenu.addEventListener("click", function () {
      mainNav.classList.toggle("active");
      this.classList.toggle("active");
    });

    // Close mobile menu when clicking on a link
    const navLinkElements = document.querySelectorAll(".main-nav a");
    navLinkElements.forEach((link) => {
      link.addEventListener("click", function () {
        mainNav.classList.remove("active");
        hamburgerMenu.classList.remove("active");
      });
    });
  });
</script>
