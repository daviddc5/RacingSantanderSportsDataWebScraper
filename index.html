<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Racing de Santander - Official Fan Page</title>

    <!-- Font Awesome for icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <!-- CSS Files -->
    <link rel="stylesheet" href="src/styles/styles.css" />
    <link rel="stylesheet" href="src/styles/header.css" />
    <link rel="stylesheet" href="src/styles/footer.css" />
    <link rel="stylesheet" href="src/styles/hero.css" />
    <link rel="stylesheet" href="src/styles/api-data.css" />

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="images/racingLogo.png" />
  </head>
  <body>
    <!-- Header Component -->
    <div id="header-placeholder"></div>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1>RACING DE SANTANDER</h1>
        <h3>Founded in 1913 â€¢ El Sardinero Stadium</h3>
      </div>
    </section>

    <!-- Main Content -->
    <main>
      <!-- League Position Section -->
      <section class="league-position-section">
        <div class="container">
          <h2>Current League Position</h2>
          <div id="league-position-container" class="league-position-card">
            <div class="loading-spinner">
              <div class="spinner"></div>
              <p>Loading league data...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Upcoming Fixtures Section -->
      <section class="fixtures-section">
        <div class="container">
          <h2>Upcoming Fixtures</h2>
          <div id="fixtures-container" class="fixtures-grid">
            <div class="loading-spinner">
              <div class="spinner"></div>
              <p>Loading fixtures...</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Quick Links Section -->
      <section class="quick-links-section">
        <div class="container">
          <h2>Quick Links</h2>
          <div class="quick-links-grid">
            <a href="pages/squad.html" class="quick-link-card">
              <i class="fas fa-users"></i>
              <h3>Squad</h3>
              <p>View the current team roster</p>
            </a>
            <a href="pages/history.html" class="quick-link-card">
              <i class="fas fa-history"></i>
              <h3>History</h3>
              <p>Explore the club's rich history</p>
            </a>
            <a href="#" class="quick-link-card">
              <i class="fas fa-ticket-alt"></i>
              <h3>Buy Tickets</h3>
              <p>Get tickets for upcoming matches</p>
            </a>
            <a href="#" class="quick-link-card">
              <i class="fas fa-store"></i>
              <h3>Shop</h3>
              <p>Official merchandise and gear</p>
            </a>
          </div>
        </div>
      </section>
    </main>

    <!-- Footer Component -->
    <div id="footer-placeholder"></div>

    <!-- JavaScript Files -->
    <script src="src/scripts/components.js"></script>
    <script src="src/api/footballAPIData.js"></script>
    <script>
      // Initialize the API handler
      const racingAPI = new RacingFootballData();

      // Load league position data
      async function loadLeaguePosition() {
        try {
          const position = await racingAPI.getLeaguePosition();
          const container = document.getElementById(
            "league-position-container"
          );

          if (position) {
            container.innerHTML = `
              <div class="position-info">
                <div class="position-number">${position.position}</div>
                <div class="position-details">
                  <h3>League Position</h3>
                  <p>Points: ${position.points}</p>
                  <p>Played: ${position.played} | Won: ${
              position.won
            } | Drawn: ${position.drawn} | Lost: ${position.lost}</p>
                  <p>Goals: ${position.goalsFor} For, ${
              position.goalsAgainst
            } Against (${position.goalDifference > 0 ? "+" : ""}${
              position.goalDifference
            })</p>
                </div>
              </div>
            `;
          } else {
            container.innerHTML = "<p>League position data unavailable</p>";
          }
        } catch (error) {
          console.error("Error loading league position:", error);
          document.getElementById("league-position-container").innerHTML =
            "<p>Error loading league position</p>";
        }
      }

      // Load upcoming fixtures
      async function loadFixtures() {
        try {
          const fixtures = await racingAPI.getUpcomingFixtures(5);
          const container = document.getElementById("fixtures-container");

          if (fixtures && fixtures.length > 0) {
            container.innerHTML = fixtures
              .map(
                (fixture) => `
              <div class="fixture-card">
                <div class="fixture-date">
                  <span class="day">${fixture.date.getDate()}</span>
                  <span class="month">${fixture.date.toLocaleDateString(
                    "en-US",
                    { month: "short" }
                  )}</span>
                </div>
                <div class="fixture-teams">
                  <div class="team home-team">
                    <img src="${fixture.homeLogo}" alt="${
                  fixture.homeTeam
                }" class="team-logo">
                    <span class="team-name">${fixture.homeTeam}</span>
                  </div>
                  <div class="vs">vs</div>
                  <div class="team away-team">
                    <img src="${fixture.awayLogo}" alt="${
                  fixture.awayTeam
                }" class="team-logo">
                    <span class="team-name">${fixture.awayTeam}</span>
                  </div>
                </div>
                <div class="fixture-details">
                  <p class="venue">${fixture.venue}</p>
                  <p class="competition">${fixture.competition}</p>
                </div>
              </div>
            `
              )
              .join("");
          } else {
            container.innerHTML = "<p>No upcoming fixtures available</p>";
          }
        } catch (error) {
          console.error("Error loading fixtures:", error);
          document.getElementById("fixtures-container").innerHTML =
            "<p>Error loading fixtures</p>";
        }
      }

      // Load all data when page loads
      document.addEventListener("DOMContentLoaded", function () {
        loadLeaguePosition();
        loadFixtures();
      });
    </script>
  </body>
</html>

<style>
  /* API-powered sections */
  .api-data-section {
    background: var(--color-white);
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    margin: 30px 0;
  }

  .api-data-section h3 {
    color: var(--color-green);
    font-size: 1.8rem;
    margin-bottom: 20px;
    text-align: center;
    border-bottom: 2px solid var(--color-green);
    padding-bottom: 10px;
  }

  .fixtures-grid {
    display: grid;
    gap: 15px;
  }

  .fixture-card {
    background: var(--color-grey-light);
    border-radius: 8px;
    padding: 20px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 15px;
    transition: transform 0.3s ease;
  }

  .fixture-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  }

  .team-info {
    text-align: center;
  }

  .team-logo {
    width: 40px;
    height: 40px;
    margin: 0 auto 8px;
    border-radius: 50%;
    background: var(--color-white);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
  }

  .team-logo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
  }

  .team-name {
    font-weight: bold;
    color: var(--color-grey-dark);
    font-size: 0.9rem;
  }

  .fixture-details {
    text-align: center;
    color: var(--color-grey-dark);
  }

  .fixture-date {
    font-weight: bold;
    color: var(--color-green);
    margin-bottom: 5px;
  }

  .fixture-venue {
    font-size: 0.8rem;
    color: var(--color-grey-medium);
  }

  .fixture-competition {
    font-size: 0.8rem;
    color: var(--color-grey-medium);
    margin-top: 5px;
  }

  .vs-text {
    font-weight: bold;
    color: var(--color-green);
    font-size: 1.2rem;
  }

  .league-position-card {
    background: linear-gradient(135deg, var(--color-green), #007a2d);
    color: var(--color-white);
    border-radius: 12px;
    padding: 30px;
    text-align: center;
    margin-bottom: 20px;
  }

  .position-number {
    font-size: 4rem;
    font-weight: bold;
    margin-bottom: 10px;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
  }

  .position-label {
    font-size: 1.2rem;
    margin-bottom: 20px;
    opacity: 0.9;
  }

  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 15px;
    margin-top: 20px;
  }

  .stat-item {
    background: rgba(255, 255, 255, 0.1);
    padding: 15px;
    border-radius: 8px;
    text-align: center;
  }

  .stat-value {
    font-size: 1.5rem;
    font-weight: bold;
    margin-bottom: 5px;
  }

  .stat-label {
    font-size: 0.8rem;
    opacity: 0.8;
  }

  .loading-container {
    text-align: center;
    padding: 40px 20px;
  }

  .loading-spinner {
    width: 40px;
    height: 40px;
    border: 3px solid var(--color-grey-light);
    border-top: 3px solid var(--color-green);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 0 auto 15px;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  .loading-text {
    color: var(--color-grey-dark);
    font-size: 1rem;
  }

  .api-status {
    text-align: center;
    margin-bottom: 20px;
    padding: 10px;
    border-radius: 5px;
    font-size: 0.9rem;
  }

  .api-status.live {
    background: #d4edda;
    color: #155724;
    border: 1px solid #c3e6cb;
  }

  .api-status.fallback {
    background: #fff3cd;
    color: #856404;
    border: 1px solid #ffeaa7;
  }

  @media (max-width: 768px) {
    .fixture-card {
      grid-template-columns: 1fr;
      text-align: center;
    }

    .position-number {
      font-size: 3rem;
    }

    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
</style>
